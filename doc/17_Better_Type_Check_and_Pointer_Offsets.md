# パート17: 型チェックの改良とポインタオフセット

少し前のパートで、ポインタを実装し型の互換性をチェックするコードを実装しました。その時は次のようなコードに

```c
  int   c;
  int  *e;

  e= &c + 1;
```

`&c`のポインタに1を加算するには`c`のサイズに変換され、メモリ上`c`の後ろにある次の`int`まで確実にスキップする必要があります。つまり整数型をスケールする必要が有ります。

これをポインタでも行う必要が有り、後で配列にも必要となります。次のコードを考えます。

```c
  int list[10];
  int x= list[3];
```

これを行うには`list[]`の初期アドレスを見つけ、それからインデックス位置3にある要素を見つけるために`int`のサイズを3回加算する必要が有ります。

このときは2つの型に互換性があるか判断する`type_compatible()`という関数を`type.c`に用意し、大きな整数型と同じサイズにするために小さな型を拡張する必要がある場合は明記するようにしていました。ただしこの拡張は別の場所で行っていました。実際コンパイラでは3箇所で処理することで実現しています。
